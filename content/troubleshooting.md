+++
title = "Troubleshooting"
draft = false
gh_repo = "chef-web-docs"

[menu]
  [menu.infra]
    title = "Troubleshooting"
    identifier = "chef_infra/Troubleshooting"
    parent = "chef_infra"
    weight = 80
+++

## License is not entitled to use Infra

The license key set with Chef Infra is not entitled to use Chef Infra. Each license key is entitled to one or more Chef products. To view the products that your key is entitled to, run the `chef-client license list` command, which will list your license entitlements.

To resolve this issue, set a license key that is entitled to Chef Infra.

See the [Chef Licensing documentation](/<provide-the-link>/) for more information.

## Unable to connect to the licensing server. Infra requires server communication to operate

Chef Infra cannot connect to Chef's licensing service or a user-deployed Chef Local License Service.
This service is responsible for validating the Chef license key set with Chef Infra.

Check the following possible causes of this issue:

- Network Connectivity

  Ensure that the machine running Chef Infra has proper network connectivity. It should be able to connect to Chef's licensing service or a user-deployed Chef Local License Service. This includes checking firewall settings and network configuration.

- Service Availability

  If you're using a user-deployed Chef Local License Service, verify that it's correctly configured and operational. Any misconfigurations or issues with the Chef Local License Service could lead to connection problems.

- URL Configuration

  If you're using a Chef Local License Service to manage Chef licenses, verify that the URL to the server is correct.

  If you configured the URL using an environment variable, check the value for environment variable `CHEF_LICENSE_SERVER` to confirm the configured URL.

  If you configured the URL using the `--chef-license-server` Infra CLI option, reset the URL using the same Infra CLI option.

- Logs and Debugging

  Check the logs generated by Chef Infra by using `--log-level debug` for more detailed error messages. Pay close attention to the URL that Chef Infra is attempting to connect to.

If the issue persists, please reach out to Chef's Customer Success managers or Support Team.

## Invalid File Format Version

Chef licensing data is stored on the `$HOME/.chef/licenses.yaml` file.

The file format version used in the `licenses.yaml` file is unsupported or invalid.
The `licenses.yaml` file must have the latest supported file format version.

Restore the file to the original state to resolve this issue.

## License file contents are corrupted

Chef licensing data is stored on the `$HOME/.chef/licenses.yaml` file.

The `licenses.yaml` file is malformed and corrupt.

Restore the file content to its original state to resolve this issue.
